import{d as x,u as S,r as k,c as T,ah as I,z as $,o as q,b as n,e,t as c,l as C,k as D,s as H,F as u,j as m,g as l,i as v,a as t,_ as F}from"./index.3cf2033f.js";import{g as P,C as R,P as d,b as j,f as E,N as z}from"./news.3d8a152d.js";import{c as G,b,u as V}from"./request-cancel-map.b5b1ef66.js";const W={key:0,class:"NewsDetails"},U={class:"container"},J={class:"top-content"},K={class:"user-info"},O={class:"text-container"},Q={class:"top"},X={class:"name"},Y={class:"date"},Z={class:"bottom"},ee={class:"details"},se={class:"title"},te={class:"content"},ae=["innerHTML"],ne={key:0,class:"tags-container"},oe={class:"tags"},ie={key:0,class:"tag"},ce={key:0,class:"related-list"},le={class:"items"},de=["onClick"],ue={class:"left"},re={class:"date"},_e={class:"title"},ve=["innerHTML"],he={key:0,class:"tags-container"},me={class:"tags"},ge={key:0,class:"tag"},pe=x({__name:"Details",props:{pageType:{}},setup(r){let{defineCancelMaps:L,saveCancelFn:g,cancelRequests:N}=V();L([G,b]);let p=S(),f=k([]),_=T(()=>o=>{var i;return(i=f.value.find(s=>s.id===o))==null?void 0:i.name});async function A(){try{let{cancel:o,request:i}=P({cid:R[r.pageType]});g(b,o);let{list:s}=await i();f.value=s}catch{}}let B=T(()=>({[d.GameGuide]:"All Game Guide",[d.EducationCourses]:"All Education Courses"})[r.pageType]);function M(){switch(r.pageType){case d.GameGuide:v.push({name:"GameGuide"});break;case d.EducationCourses:v.push({name:"EducationCourses"});break}}let a=k(null);async function y(){try{let{cancel:o,request:i}=j({id:p.params.id});g(G,o);let s=await i();a.value=s}catch{}}I(()=>p.params.id,()=>{y()});function w(o){let{id:i}=o;switch(r.pageType){case d.GameGuide:v.push({name:"GameGuideDetails",params:{id:i}});break;case d.EducationCourses:v.push({name:"EducationCoursesDetails",params:{id:i}});break}}return $(()=>{A(),y()}),q(()=>{N()}),(o,i)=>a.value?(t(),n("div",W,[e("div",U,[e("div",{class:"back",onClick:M},c(B.value),1),e("div",J,[e("div",K,[e("div",{class:"picture",style:C({backgroundImage:`url(${a.value.info.author.head_img})`})},null,4),e("div",O,[e("div",Q,[e("div",X,c(a.value.info.author.name),1),e("div",Y,c(D(E)(+a.value.info.add_time)),1)]),e("div",Z,c(a.value.info.author.synopsis),1)])]),e("div",ee,[e("div",se,c(a.value.info.title),1),e("div",te,[a.value.info.content.content?(t(),n("div",{key:0,innerHTML:a.value.info.content.content},null,8,ae)):(t(),H(z,{key:1}))]),a.value.info.flgs?(t(),n("div",ne,[e("div",oe,[(t(!0),n(u,null,m(a.value.info.flgs.split(","),s=>(t(),n(u,null,[_.value(+s)?(t(),n("div",ie,c(_.value(+s)),1)):l("",!0)],64))),256))])])):l("",!0)])]),a.value.recommend.length?(t(),n("div",ce,[e("div",le,[(t(!0),n(u,null,m(a.value.recommend,s=>(t(),n("div",{class:"item",onClick:h=>w(s)},[e("div",ue,[e("div",re,c(D(E)(+s.add_time)),1),e("div",_e,c(s.title),1),e("div",{class:"description",innerHTML:s.content.content},null,8,ve),s.flgs?(t(),n("div",he,[e("div",me,[(t(!0),n(u,null,m(s.flgs.split(","),h=>(t(),n(u,null,[_.value(+h)?(t(),n("div",ge,c(_.value(+h)),1)):l("",!0)],64))),256))])])):l("",!0)]),e("div",{class:"right",style:C({backgroundImage:`url(${s.image_input[0]})`})},null,4)],8,de))),256))])])):l("",!0)])])):l("",!0)}});const Te=F(pe,[["__scopeId","data-v-8c315af2"]]);export{Te as D};
